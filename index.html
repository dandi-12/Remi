<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Remi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
  html, body {
  height: 100%;
  margin: 0;
  font-family: "Segoe UI", Tahoma, sans-serif;
  background: #fff; /* putih polos */
}

table {
  width: 100%;
  height: calc(100% - 60px); /* sisakan ruang buat tombol reset */
  table-layout: fixed;
  border-collapse: collapse;
}

table th,
table td {
  padding: 0 !important;
  vertical-align: middle !important;
  font-size: 16px;
  border: 1px solid #ddd;
}

table th {
  background: #2c3e50;
  color: #fff;
}

/* warna selang-seling baris */
tbody tr:nth-child(odd) {
  background-color: #ffffff; /* putih */
}
tbody tr:nth-child(even) {
  background-color: #525252; /* abu muda */
}

/* input poin */
input.form-control {
  font-size: 16px;
  padding: 15px 10px;
  border: none;
  width: 100%;
  background: transparent;
  text-align: center;
}
input.form-control:focus {
  outline: none;
  background: #eaf3ff; /* highlight saat fokus */
}

/* nama pemain lebih besar */
thead th input {
  font-size: 20px;
  font-weight: bold;
  color: #fff;
  background: transparent;
}

/* total poin lebih besar */
tfoot td {
  font-size: 22px;
  font-weight: bold;
  background: #ecf0f1;
}

/* efek coret */
.dicoret {
  text-decoration: line-through;
  color: red;
}

thead th:nth-child(1) input { background-color: #2c3e50; color: #fff; }
thead th:nth-child(2) input { background-color: #2c3e50; color: #fff; }
thead th:nth-child(3) input { background-color: #2c3e50; color: #fff; }
thead th:nth-child(4) input { background-color: #2c3e50; color: #fff; }


/* tombol reset */
.reset-btn {
  width: 100%;
  border-radius: 0;
  padding: 15px;
  font-size: 20px;
  background: red;
  color: white;
  border: none;
  cursor: pointer;
}
.reset-btn:hover {
  background: #1a242f;
}

thead th {
  background: #2c3e50;
  color: #fff;
  position: sticky;
  top: 0; /* tetap di atas saat scroll */
  z-index: 2;
}

tfoot td {
  font-size: 22px;
  font-weight: bold;
  background: #ecf0f1;
  position: sticky;
  bottom: 10px;
  z-index: 1;
}


.reset-btn {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 60px;
  font-size: 20px;
  border-radius: 0; /* ujung kotak */
}


.table-container {
  height: calc(100vh - 70px);
  overflow-y: auto;
  padding-bottom: 70px; /* ruang untuk tombol reset */
}

</style>

</head>
<body>
  <!-- Tabel scrollable -->
  <div class="table-container" style="height: calc(100vh - 120px); overflow-y: auto;">
    <table class="table table-bordered text-center align-middle mb-0" id="scoreTable">
      <thead>
        <tr>
          <th style="width:25%"><input type="text" value="A" onchange="updateName(0, this.value)" class="form-control" /></th>
          <th style="width:25%"><input type="text" value="B" onchange="updateName(1, this.value)" class="form-control" /></th>
          <th style="width:25%"><input type="text" value="C" onchange="updateName(2, this.value)" class="form-control" /></th>
          <th style="width:25%"><input type="text" value="D" onchange="updateName(3, this.value)" class="form-control" /></th>
        </tr>
      </thead>
      <tbody id="scoreBody"></tbody>
    </table>
  </div>

  <!-- Footer total poin (4 kolom tetap) -->
  <div class="fixed-footer-totals d-flex" style="position: fixed; bottom: 60px; width: 100%; background: #2c3e50; padding: 10px 0; color: #fff; font-weight: bold; font-size: 18px; justify-content: space-between; box-sizing: border-box;">
    <div style="width:25%; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;" id="total0">0</div>
    <div style="width:25%; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;" id="total1">0</div>
    <div style="width:25%; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;" id="total2">0</div>
    <div style="width:25%; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;" id="total3">0</div>
  </div>

  <!-- Tombol reset -->
  <button class="btn btn-danger reset-btn" onclick="resetAll()">Reset</button>

</body>


  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

 <script>
  let totals = [0, 0, 0, 0];
  const scoreBody = document.getElementById("scoreBody");
  let playerNames = ["A", "B", "C", "D"];
  const DEFAULT_ROWS = 10; // jumlah baris awal

  function addRow() {
    let row = document.createElement("tr");
    for (let i = 0; i < 4; i++) {
      let cell = document.createElement("td");
      cell.className = "p-0";
      cell.setAttribute("data-label", playerNames[i]);

      let wrapper = document.createElement("div");
      wrapper.className = "d-flex flex-column h-100";

      let input = document.createElement("input");
      input.type = "text"; // supaya bisa isi angka atau kata "coret"
      input.className = "form-control text-center border-0 rounded-0 w-100 flex-grow-1";
      input.dataset.player = i;
      input.addEventListener("input", handleInput);

      wrapper.appendChild(input);
      cell.appendChild(wrapper);
      row.appendChild(cell);
    }
    scoreBody.appendChild(row);
  }

  function handleInput(e) {
    let input = e.target;
    if (input.value.trim().toLowerCase() === "coret") {
      input.classList.add("dicoret");
    } else {
      input.classList.remove("dicoret");
    }
    hitungUlang();
    cekTambahBaris();
  }

  function hitungUlang() {
    totals = [0, 0, 0, 0];
    let resetIndex = [-1, -1, -1, -1];

    Array.from(scoreBody.rows).forEach((row, rowIndex) => {
      row.querySelectorAll("input").forEach((inp, idx) => {
        if (inp.classList.contains("dicoret")) {
          resetIndex[idx] = rowIndex;
          totals[idx] = 0;
        } else {
          if (rowIndex > resetIndex[idx]) {
            let val = parseInt(inp.value) || 0;
            totals[idx] += val;
          }
        }
      });
    });

    for (let i = 0; i < 4; i++) {
      document.getElementById("total" + i).textContent = totals[i];
    }
  }

  function cekTambahBaris() {
    const lastRow = scoreBody.lastElementChild;
    if (lastRow) {
      let hasValue = Array.from(lastRow.querySelectorAll("input")).some(
        (inp) => inp.value !== ""
      );
      if (hasValue) addRow();
    }
  }

  function updateName(index, value) {
    playerNames[index] = value || `Pemain ${index + 1}`;
    Array.from(scoreBody.rows).forEach((row) => {
      let cell = row.cells[index];
      if (cell) cell.setAttribute("data-label", playerNames[index]);
    });
  }

  function resetAll() {
  if (!confirm("Apakah Anda yakin ingin mereset semua poin?")) {
    return; // batal reset jika user tekan Cancel
  }

  totals = [0, 0, 0, 0];
  scoreBody.innerHTML = "";
  for (let i = 0; i < 4; i++) {
    document.getElementById("total" + i).textContent = 0;
  }
  for (let i = 0; i < DEFAULT_ROWS; i++) {
    addRow();
  }
}


  // render default rows
  for (let i = 0; i < DEFAULT_ROWS; i++) {
    addRow();
  }
</script>

</body>
</html>
